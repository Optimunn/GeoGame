import { SettingsMenu } from "settings.slint";
import { GameWindow } from "game.slint";
import { PrePlayWindow } from "preplay.slint";
import { WelcomeWindow } from "welcome.slint";
import { AboutApplication } from "about.slint";
import { OnExitWindow } from "onexit.slint";
import { GlobalVar } from "globals.slint";
import { EndGameWindow } from "endgame.slint";
import { Tr } from "translation.slint";

export component MainWindow inherits Window {
    //in game button witch answer
    callback button-clicked(int);
    //run when clicked level of play
    callback run-game-process(int);
    //update window
    callback update-window;
    //run when checkbox be clicked
    callback checkbox-clicked <=> window-preplay.checkbox-clicked;
    //open url in browser
    callback open-url-info(int);
    //ret current selected button color
    callback selected-button-color(int);
    //ret current selected language
    callback selected-language(int);

    in property current-translation <=> Tr.tr;

    in-out property selected-button-color-index <=> window-settings.selected-color-index;
    in-out property selected-language-index <=> window-settings.selected-language-index;

    in-out property uniq-button-color <=> GlobalVar.button-color;
    in property image-welcome <=> window-welcome.image-welcome;

    in-out property button-data <=> window-game.button-data;
    in-out property answer-data <=> window-game.answer-data;
    in-out property img-or-text <=> window-game.img-or-text;
    in-out property question-number <=> window-game.question-number;
    in-out property run-game-timer <=> GlobalVar.game-timer-run;
    in property info-about-country <=> GlobalVar.country-information;
    in property loaded-image <=> window-game.icon-data;
    in property loaded-text <=> window-game.text-data;

    in-out property checkbox-continent-checked <=> window-preplay.cnt-check;
    in-out property checkbox-mode-checked <=> window-preplay.mode-check;
    in-out property checkbox-continent-blocked <=> window-preplay.checkbox-block;
    in-out property checkbox-mode-blocked <=> window-preplay.checkbox-mode-block;

    in-out property end-game-events <=> windows-endgame.game-events;

    in-out property <int> scene-visible: 1;

    title: "Geographical game";
    preferred-width:  550px;
    preferred-height: 550px;
    background: #ffffff00;

    window-game := GameWindow {
        visible: scene-visible == 0;
        button-clicked(item) => { root.button-clicked(item) }
        click-continue => { root.update-window() }
        scene-visible-type(item) => { root.scene-visible = 1; window-welcome.game-type = item; }
    }

    window-welcome := WelcomeWindow {
        visible: scene-visible == 1;
        scene-visible(item) => { root.scene-visible = item; }
    }

    window-preplay := PrePlayWindow {
        visible: scene-visible == 2;
        scene-visible(item) => { root.scene-visible = item; }
        run-process(item) => { root.run-game-process(item); root.update-window(); }
    }

    window-settings := SettingsMenu {
        visible: scene-visible == 3;
        scene-visible => { root.scene-visible = 1 }
        selected-button-color(item) => { root.selected-button-color(item) }
        selected-button-language(item) => { root.selected-language(item) }
    }

    window-about := AboutApplication {
        visible: scene-visible == 4;
        open-url(item) => { root.open-url-info(item) }
        scene-visible => { root.scene-visible = 1 }
    }

    windows-endgame := EndGameWindow {
        visible: scene-visible == 5;
        scene-visible => { root.scene-visible = 1 }
    }
}

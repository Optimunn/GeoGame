import { SettingsMenu} from "settings.slint";
import { PrimeWindow } from "window.slint";
import { PrePlayWindow } from "preplay.slint";
import { WelcomeWindow } from "welcome.slint";
import { AboutApplication } from "about.slint";

struct ButtonData {
    text: string,
    color: color
}

export component MainWindow inherits Window {
    callback button-clicked(int);
    callback update-window;
    callback checkbox-continent-clicked;
    callback open-url-info(int);
    in-out property button-data <=> window-game.button-data;
    in-out property checkbox-continent-checked <=> window-preplay.cnt-check;
    in-out property checkbox-continent-blocked <=> window-preplay.checkbox-block;
    in property loaded_image <=> window-game.icon;

    private property visible-touch-in-prime-window <=> window-game.visible_touch;
    private property <int> scene-visible: 1;
    
    title: "Geographical game";
    preferred-width:  550px;
    preferred-height: 550px;
    background: #ffffff00;

    window-game := PrimeWindow {
        visible: scene-visible == 0;
        button-clicked(index) => { root.button-clicked(index) }
        click-continue => { root.update-window() }
        scene-visible => { root.scene-visible = 1 }
    }

    window-welcome := WelcomeWindow {
        visible: scene-visible == 1;
        scene-visible(item) => { root.scene-visible = item; }
    }

    window-preplay := PrePlayWindow {
        visible: scene-visible == 2;
        continent-clicked => { root.checkbox-continent-clicked() }
        scene-visible(item) => { root.scene-visible = item; }
    }

    window-settings := SettingsMenu {
        visible: scene-visible == 3;
        scene-visible => { root.scene-visible = 1 }
    }

    window_about := AboutApplication {
        visible: scene-visible == 4;
        open-url(item) => { root.open-url-info(item) }
        scene-visible => { root.scene-visible = 1 }
    }
}
